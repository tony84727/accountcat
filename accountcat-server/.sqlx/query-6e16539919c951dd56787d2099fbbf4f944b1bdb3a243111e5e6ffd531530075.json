{
  "db_name": "PostgreSQL",
  "query": "select count(*) count,\n    -sum(case when accounting_items.amount < 0 then accounting_items.amount else 0 end) expense,\n    sum(case when accounting_items.amount > 0 then accounting_items.amount else 0 end) income,\n    date_trunc('day', now(), 'Asia/Taipei') at time zone 'Asia/Taipei' today\nfrom accounting_items\njoin users on users.id = accounting_items.user_id\nwhere users.google_sub = $1\n      and accounting_items.occurred_at >= date_trunc('day', now(), 'Asia/Taipei')\n      and accounting_items.occurred_at < date_trunc('day', now(), 'Asia/Taipei') + interval '1 day'\n",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "count",
        "type_info": "Int8"
      },
      {
        "ordinal": 1,
        "name": "expense",
        "type_info": "Numeric"
      },
      {
        "ordinal": 2,
        "name": "income",
        "type_info": "Numeric"
      },
      {
        "ordinal": 3,
        "name": "today",
        "type_info": "Timestamp"
      }
    ],
    "parameters": {
      "Left": [
        "Text"
      ]
    },
    "nullable": [
      null,
      null,
      null,
      null
    ]
  },
  "hash": "6e16539919c951dd56787d2099fbbf4f944b1bdb3a243111e5e6ffd531530075"
}
